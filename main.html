<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>laaaaa</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <style >
            @import "main.css";

             div div{
                display: inline;
            }
             div div div{
                position: absolute;
                z-index: 60;
            }
        </style>
        <script src="img_process.js"></script>
</head>
<body>

    <img  class="blank"  src="img_source\blank.png">
    <img  id="wood" src="img_source\bg\wood.png" >
    <img id="xp" src="xp.png">

    

    <div class="special" id="spp">
        <div>   
            <div id="sp_0">
                <img class="sp" id="sp0" src="img_source\food\special\wd_fish.png">
                <img class="sp" id="sp1" src="img_source\food\special\wd_fish.png">
                <img class="sp" id="sp2" src="img_source\food\special\wd_fish.png">
            </div>
            <img    class="box" src="img_source\bg\box.png">
        </div>
        <div>    
            
            <div id="sp_1">
                <img class="sp" id="sp3" src="img_source\food\special\wd_fish.png">
                <img class="sp" id="sp4" src="img_source\food\special\wd_fish.png">
                <img class="sp" id="sp5" src="img_source\food\special\wd_fish.png">
            </div>
            <img    class="box" src="img_source\bg\box.png">
        </div>
    </div>

    <div  class="special" id="egg_box">
    <div>
            <div class="food" id="egg_0">
                <img class="sp" id="egg0" src="img_source\food\fresh\3egg.png">
                <img class="sp" id="egg1" src="img_source\food\fresh\3egg.png">
                <img class="sp" id="egg2" src="img_source\food\fresh\3egg.png">
                <img class="sp" id="egg3" src="img_source\food\fresh\3egg.png">
                <img class="sp" id="egg4" src="img_source\food\fresh\3egg.png">

            </div>
            <img  class="blank"  src="img_source\blank.png">
    </div>   
</div>
    <div  class="special" id="tomato_box">
        <div>
            <img src="img_source\bg\blanket_o.png" class="tom_blanket"id="tom_blanket">
                <div class="food" id="tom_0">
                    <img class="sp" id="tom0" src="img_source\food\fresh\4tomato.png">
                    <img class="sp" id="tom1" src="img_source\food\fresh\4tomato.png">
                    <img class="sp" id="tom2" src="img_source\food\fresh\4tomato.png">
                    <img class="sp" id="tom3" src="img_source\food\fresh\4tomato.png">
                    <img class="sp" id="tom4" src="img_source\food\fresh\4tomato.png">
    
                </div>
                <img src="img_source\bg\blanket.png" class="tom_blanket" >
                <img  class="blank" id="tomb" src="img_source\blank.png">
                
        </div>
    </div>   
    


    <div id="guest" class="bg">
        <img  class="blank" id="blank0" src="img_source\blank.png">
        <img  class="blank" id="blank1" src="img_source\blank.png">
        <img  class="blank" id="blank2" src="img_source\blank.png">
        <div id="g_0" class="g">
            <img  class="head_img"  src="uuu.png">
            <img  class="guest"  src="img_source\guest.png">
        </div>
        
    </div>
    <img  id="sky" class="bg" src="img_source\sky.jpg" >


<script >
    let wid=window.outerWidth;
    img_resize();
    $(document).ready(function(){
        $(function () {
            var _link = $('<link rel="stylesheet" type="text/css" href="https://vayne1125.github.io/final_project/CSS.css">');
            
            // 提前修改link屬性
            _link.attr("title", "global");
            
            _link.appendTo("head");
        });






        let ds=document.querySelectorAll(".sp"),dr=document.querySelectorAll(".g"); //砸食材
    [].forEach.call(ds,function(ds){
        ds.ondragstart=function(event){
            event.dataTransfer.setData("text", event.target.id);
        };
        
    });
    [].forEach.call(dr,function(drr){
        drr.ondrop=function(event){
            let n=Math.floor(Math.random()*4);
            event.preventDefault();
            let data = event.dataTransfer.getData("text");
            let tar=document.querySelector('#'+data);
                if(!n){                 //guest閃躲
                    $(document).ready(
                        function(){
                            $(event.target.parentNode.childNodes).animate({top:"+=500px"},"slow");
                            $(event.target.parentNode.childNodes).animate({top:"-=500px"},"slow");
                            $(tar).remove();
                        }
                    );
                }
                else{
                let d=tar.src.split('/');
                tar.src="img_source\\food\\wasted\\"+d[d.length-1];tar.className="wasted";tar.draggable=false;
                tar.style.width=""+wid/6+"px";
                $(tar).mouseover(function(){$(this).css("width",""+wid/5.5+"px");});   //
                $(tar).mouseout(function(){$(this).css("width",""+wid/6+"px");});
                $(document).ready(function(){
                    $(event.target.parentNode).prepend(tar);
                });}
        
    }});
    

    });

</script>
</body>

</html>
